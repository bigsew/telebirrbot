<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Digital Pro ¬∑ Profile+</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.min.css">
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <style>
        :root {
            --tg-theme-bg-color: #f0f2f5;
            --primary-blue: #0088cc;
            --star-gold: #FFD700;
            --premium-purple: #8B5CF6;
            --glass: rgba(255, 255, 255, 0.9);
            --admin-badge: #dc3545;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--tg-theme-bg-color);
            margin: 0;
            padding-bottom: 90px;
            color: #1c1c1e;
        }

        .app-shell {
            max-width: 480px;
            margin: 0 auto;
            background: #fdfdfd;
            min-height: 100vh;
            position: relative;
        }

        .glass-header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: var(--glass);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(0,0,0,0.05);
            padding: 15px;
        }

        .hero-card {
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1614850523296-d8c1af93d400?w=600');
            background-size: cover;
            background-position: center;
            border-radius: 24px;
            padding: 30px 20px;
            color: white;
            text-align: center;
            margin-bottom: 20px;
        }

        /* JOB CARD IMAGE GALLERY (SLIDER) */
        .card-img-gallery {
            position: relative;
            width: 100%;
            height: 200px; /* fixed height for gallery */
            overflow: hidden;
            border-radius: 20px 20px 0 0;
            background: #eef2f6;
        }

        .gallery-slider {
            display: flex;
            width: 100%;
            height: 100%;
            scroll-snap-type: x mandatory;
            overflow-x: auto;
            overflow-y: hidden;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none; /* hide scrollbar Firefox */
        }

        .gallery-slider::-webkit-scrollbar {
            display: none; /* hide scrollbar Chrome/Safari */
        }

        .gallery-slide {
            flex: 0 0 100%;
            height: 100%;
            scroll-snap-align: start;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            transition: transform 0.3s ease;
            cursor: zoom-in;
        }

        /* zoom overlay */
        .zoom-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .zoom-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .zoomed-img {
            max-width: 90%;
            max-height: 90%;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(255,215,0,0.3);
            border: 3px solid white;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .zoom-overlay.active .zoomed-img {
            transform: scale(1);
        }

        .zoom-close {
            position: absolute;
            top: 30px;
            right: 30px;
            color: white;
            font-size: 2.5rem;
            cursor: pointer;
            background: rgba(255,255,255,0.2);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .zoom-close:hover {
            background: rgba(255,255,255,0.4);
            transform: scale(1.1);
        }

        /* dots indicator */
        .gallery-dots {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 5;
        }

        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255,255,255,0.6);
            transition: all 0.2s;
        }

        .dot.active {
            background: #FFD700;
            width: 20px;
            border-radius: 10px;
        }

        /* job card layout */
        .card-job {
            background: #fff;
            border-radius: 20px;
            border: 1px solid rgba(0,0,0,0.05);
            margin-bottom: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .job-content {
            padding: 18px;
        }

        .job-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .app-badge {
            display: inline-block;
            background: var(--primary-blue);
            color: white;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.7rem;
        }

        .amharic-description {
            background: #f8f9fa;
            border-radius: 16px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid var(--primary-blue);
        }

        .amharic-text {
            font-size: 0.95rem;
            color: #1c1c1e;
            margin-bottom: 12px;
            font-weight: 500;
        }

        .feature-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .feature-list li {
            padding: 6px 0;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            border-bottom: 1px dashed #e0e0e0;
        }

        .feature-list li:last-child {
            border-bottom: none;
        }

        .feature-list i {
            color: #28a745;
            font-size: 1rem;
            width: 20px;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
            margin-top: 15px;
        }

        .btn-app {
            flex: 1;
            padding: 12px 8px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.85rem;
            border: none;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .btn-app.details { background: #28a745; color: white; }
        .btn-app.download { background: var(--primary-blue); color: white; }
        .btn-app.tutorial { background: #dc3545; color: white; }
        .btn-app.admin-edit { background: #6f42c1; color: white; }
        .btn-app:hover { opacity: 0.9; transform: scale(0.98); }

        .search-box {
            background: #f1f1f1;
            border: none;
            border-radius: 12px;
            padding: 10px 15px;
            width: 100%;
            margin-bottom: 15px;
        }

        .filter-scroll {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            padding-bottom: 5px;
            scrollbar-width: none;
        }
        .filter-scroll::-webkit-scrollbar { display: none; }

        .chip {
            padding: 6px 16px;
            border-radius: 20px;
            background: #fff;
            border: 1px solid #ddd;
            font-size: 0.85rem;
            white-space: nowrap;
            cursor: pointer;
        }
        .chip.active { background: var(--primary-blue); color: #fff; border-color: var(--primary-blue); }

        .nav-dock {
            position: fixed;
            bottom: 0;
            width: 100%;
            max-width: 480px;
            background: var(--glass);
            backdrop-filter: blur(20px);
            display: flex;
            justify-content: space-around;
            padding: 12px 0 calc(12px + env(safe-area-inset-bottom));
            border-top: 1px solid rgba(0,0,0,0.08);
            z-index: 2000;
        }

        .nav-btn {
            color: #8e8e93;
            text-decoration: none;
            font-size: 0.7rem;
            text-align: center;
            flex: 1;
            cursor: pointer;
        }
        .nav-btn.active { color: var(--primary-blue); }
        .nav-btn i { font-size: 1.4rem; display: block; }

        .fade-in { animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* rest of premium/stars styles (shortened for brevity, same as original but functional) */
        .modern-stars-header { background: linear-gradient(145deg, #1a1a2e, #16213e); border-radius: 32px; padding: 30px 20px; margin-bottom: 25px; position: relative; overflow: hidden; color: white; }
        .premium-package-card { border-radius: 24px; padding: 24px 16px; color: white; margin-bottom: 16px; background: linear-gradient(135deg, #667eea, #764ba2); }
        .buy-btn { background: rgba(255,255,255,0.95); border: none; border-radius: 40px; padding: 14px; font-weight: 700; width: 100%; }
    </style>
</head>
<body>

<div class="app-shell">
    
    <header class="glass-header">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h5 class="fw-bold mb-0">Digital Pro</h5>
                <span class="small text-muted" id="user-status">Loading...</span>
            </div>
            <div class="d-flex align-items-center gap-2">
                <i class="bi bi-bell-fill text-warning notification-bell"></i>
                <img src="https://ui-avatars.com/api/?name=User&background=0088cc&color=fff" id="user-avatar" class="rounded-circle" width="35" height="35">
            </div>
        </div>
    </header>

    <div class="p-3">
        <main id="main-content">
            
            <!-- HOME SECTION (unchanged, kept minimal for focus) -->
            <section id="sec-home" class="fade-in">
                <div class="hero-card shadow">
                    <h2 class="fw-bold" id="welcomeName">Welcome Back!</h2>
                    <p class="small opacity-75">Start earning and growing your digital presence today.</p>
                    <button class="btn btn-light btn-sm rounded-pill px-4 fw-bold" onclick="navigateTo('sec-jobs')">View Daily Tasks</button>
                </div>
                <!-- ... rest of home can be same as original, omitted for brevity ... -->
                <h6 class="fw-bold mb-3"><i class="bi bi-play-btn-fill text-danger"></i> Featured Tutorial</h6>
                <div class="ratio ratio-16x9 rounded-4 overflow-hidden shadow-sm mb-4">
                    <iframe src="https://www.youtube.com/embed/nQcpFX60puc" allowfullscreen></iframe>
                </div>
            </section>

            <!-- JOBS SECTION with GALLERY + ZOOM -->
            <section id="sec-jobs" class="fade-in d-none">
                <input type="text" class="search-box" placeholder="Search tasks..." id="jobSearch">
                
                <div class="filter-scroll mb-3">
                    <div class="chip active" onclick="filterType('all', this)">All</div>
                    <div class="chip" onclick="filterType('app', this)">üì≤ Apps (4)</div>
                    <div class="chip" onclick="filterType('bot', this)">ü§ñ Bots</div>
                    <div class="chip" onclick="filterType('web', this)">üåê Web</div>
                </div>

                <div id="job-container">
                    <!-- GEMGALA - with 2 images + zoom -->
                    <div class="card-job shadow-sm" data-type="app" data-job="gemgala">
                        <div class="card-img-gallery" id="gallery-gemgala">
                            <div class="gallery-slider">
                                <div class="gallery-slide" style="background-image: url('https://images.unsplash.com/photo-1642790551116-18e150f248e3?w=500')" data-zoom-src="https://images.unsplash.com/photo-1642790551116-18e150f248e3?w=800" onclick="openZoom(this)"></div>
                                <div class="gallery-slide" style="background-image: url('https://images.unsplash.com/photo-1611162616305-c69b3fa7fbe0?w=500')" data-zoom-src="https://images.unsplash.com/photo-1611162616305-c69b3fa7fbe0?w=800" onclick="openZoom(this)"></div>
                            </div>
                            <div class="gallery-dots" id="dots-gemgala">
                                <span class="dot active"></span><span class="dot"></span>
                            </div>
                        </div>
                        <div class="job-content">
                            <div class="job-title">Gemgala üíé <span class="app-badge">App</span></div>
                            <div class="amharic-description">
                                <div class="amharic-text">üá™üáπ ·ä¢·âµ·ãÆ·åµ·ã´·ãç·ã´·äï ·â•·ãô·ãé·âΩ ·ä•·ãö·àÖ ·àã·ã≠ ·åà·äï·ãò·â• ·àõ·ãç·å£·âµ ·åÄ·àù·à®·ãã·àç üòÄ</div>
                                <ul class="feature-list">
                                    <li><i class="bi bi-check-circle-fill"></i> <span class="feature-emoji">‚úÖ</span> 100% Payment Verified</li>
                                    <li><i class="bi bi-check-circle-fill"></i> <span class="feature-emoji">üí∏</span> Minimum Withdraw 10$</li>
                                    <li><i class="bi bi-check-circle-fill"></i> <span class="feature-emoji">ü§ë</span> 1$ Per Referral</li>
                                </ul>
                            </div>
                            <div class="action-buttons">
                                <button class="btn-app details" onclick="openLink('https://t.me/Big_sew/12625')"><i class="bi bi-info-circle"></i> Details</button>
                                <button class="btn-app download" onclick="openLink('https://getblock.me/u/24430158')"><i class="bi bi-download"></i> Download</button>
                                <button class="btn-app tutorial" onclick="openLink('https://youtu.be/nQcpFX60puc')"><i class="bi bi-play-circle"></i> Tutorial</button>
                            </div>
                        </div>
                    </div>

                    <!-- TAKA - 2 images -->
                    <div class="card-job shadow-sm" data-type="app">
                        <div class="card-img-gallery" id="gallery-taka">
                            <div class="gallery-slider">
                                <div class="gallery-slide" style="background-image: url('https://images.unsplash.com/photo-1611162616305-c69b3fa7fbe0?w=500')" data-zoom-src="https://images.unsplash.com/photo-1611162616305-c69b3fa7fbe0?w=800" onclick="openZoom(this)"></div>
                                <div class="gallery-slide" style="background-image: url('https://images.unsplash.com/photo-1612287230202-1ff1d85d1bdf?w=500')" data-zoom-src="https://images.unsplash.com/photo-1612287230202-1ff1d85d1bdf?w=800" onclick="openZoom(this)"></div>
                            </div>
                            <div class="gallery-dots"><span class="dot active"></span><span class="dot"></span></div>
                        </div>
                        <div class="job-content">
                            <div class="job-title">Taka üéØ <span class="app-badge">App</span></div>
                            <div class="amharic-description">
                                <div class="amharic-text">üö® ·ä†·àÅ·äë·äë ·àò·åÄ·àò·à≠ ·ã´·àà·â£·âΩ·àÅ ·àµ·à´ üíÅ</div>
                                <ul class="feature-list">
                                    <li><i class="bi bi-check-circle-fill"></i> <span class="feature-emoji">üé≤</span> Spin 7$‚Äì8$ ·ãï·ãµ·àç</li>
                                    <li><i class="bi bi-check-circle-fill"></i> <span class="feature-emoji">üé§</span> 5 ·ã∞·âÇ·âÉ mic on = 1 Spin daily</li>
                                    <li><i class="bi bi-check-circle-fill"></i> <span class="feature-emoji">üë•</span> 1 Invite = 2 Spin</li>
                                </ul>
                            </div>
                            <div class="action-buttons">
                                <button class="btn-app details" onclick="openLink('https://t.me/Big_sew/12532')"><i class="bi bi-info-circle"></i> Details</button>
                                <button class="btn-app download" onclick="openLink('https://os8.me/WdfkCd')"><i class="bi bi-download"></i> Download</button>
                                <button class="btn-app tutorial" onclick="openLink('https://youtu.be/exampleTakaTutorial')"><i class="bi bi-play-circle"></i> Tutorial</button>
                            </div>
                        </div>
                    </div>

                    <!-- HIFAMI - 2 images (for variety) -->
                    <div class="card-job shadow-sm" data-type="app">
                        <div class="card-img-gallery">
                            <div class="gallery-slider">
                                <div class="gallery-slide" style="background-image: url('https://images.unsplash.com/photo-1612287230202-1ff1d85d1bdf?w=500')" data-zoom-src="https://images.unsplash.com/photo-1612287230202-1ff1d85d1bdf?w=800" onclick="openZoom(this)"></div>
                                <div class="gallery-slide" style="background-image: url('https://images.unsplash.com/photo-1611162618071-b39a2ec055fb?w=500')" data-zoom-src="https://images.unsplash.com/photo-1611162618071-b39a2ec055fb?w=800" onclick="openZoom(this)"></div>
                            </div>
                            <div class="gallery-dots"><span class="dot active"></span><span class="dot"></span></div>
                        </div>
                        <div class="job-content">
                            <div class="job-title">Hifami üéÆ <span class="app-badge">App</span></div>
                            <div class="amharic-description">
                                <div class="amharic-text">ü•á 0.3$ ·ä•·äï·ã∞·åà·â£·âΩ·àÅ withdraw ·âµ·âΩ·àã·àã·âΩ·àÅ ‚úÖ</div>
                                <ul class="feature-list">
                                    <li><i class="bi bi-check-circle-fill"></i> <span class="feature-emoji">üéÆ</span> Game ·â†·àò·å´·ãà·âµ ·ã≠·à∞·à´·àç</li>
                                    <li><i class="bi bi-check-circle-fill"></i> <span class="feature-emoji">üî•</span> 0.1$ Per Invite</li>
                                    <li><i class="bi bi-check-circle-fill"></i> <span class="feature-emoji">‚úÖ</span> 3x Withdrawal Done</li>
                                </ul>
                            </div>
                            <div class="action-buttons">
                                <button class="btn-app details" onclick="openLink('https://t.me/Big_sew/12516')"><i class="bi bi-info-circle"></i> Details</button>
                                <button class="btn-app download" onclick="openLink('https://s.hifamiapp.com/1/cfUpkaAgC')"><i class="bi bi-download"></i> Download</button>
                                <button class="btn-app tutorial" onclick="openLink('https://youtu.be/exampleHifamiTutorial')"><i class="bi bi-play-circle"></i> Tutorial</button>
                            </div>
                        </div>
                    </div>

                    <!-- Buzzer also gets 2 images -->
                    <div class="card-job shadow-sm" data-type="app">
                        <div class="card-img-gallery">
                            <div class="gallery-slider">
                                <div class="gallery-slide" style="background-image: url('https://images.unsplash.com/photo-1611162618071-b39a2ec055fb?w=500')" data-zoom-src="https://images.unsplash.com/photo-1611162618071-b39a2ec055fb?w=800" onclick="openZoom(this)"></div>
                                <div class="gallery-slide" style="background-image: url('https://images.unsplash.com/photo-1612287230202-1ff1d85d1bdf?w=500')" data-zoom-src="https://images.unsplash.com/photo-1612287230202-1ff1d85d1bdf?w=800" onclick="openZoom(this)"></div>
                            </div>
                            <div class="gallery-dots"><span class="dot active"></span><span class="dot"></span></div>
                        </div>
                        <div class="job-content">
                            <div class="job-title">Buzzer üì± <span class="app-badge">App</span></div>
                            <div class="amharic-description">
                                <div class="amharic-text">üí∞ USDT (Dollar) ·àò·àµ·à´·âµ ·âµ·âΩ·àã·àã·âΩ·àÅ</div>
                                <ul class="feature-list">
                                    <li><i class="bi bi-check-circle-fill"></i> <span class="feature-emoji">üé¨</span> Watch Video</li>
                                    <li><i class="bi bi-check-circle-fill"></i> <span class="feature-emoji">‚ù§Ô∏è</span> Like ‚ù§Ô∏è Comment üí¨</li>
                                    <li><i class="bi bi-check-circle-fill"></i> <span class="feature-emoji">üë•</span> 1 Invite = 0.15$</li>
                                </ul>
                            </div>
                            <div class="action-buttons">
                                <button class="btn-app details" onclick="openLink('https://t.me/Big_sew/12338')"><i class="bi bi-info-circle"></i> Details</button>
                                <button class="btn-app download" onclick="openLink('https://app.buzzerfan.com/referral-invite/rsa6b36e1076a44ffb8948fdcfb2818892')"><i class="bi bi-download"></i> Download</button>
                                <button class="btn-app tutorial" onclick="openLink('https://youtu.be/exampleBuzzerTutorial')"><i class="bi bi-play-circle"></i> Tutorial</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- STARS SECTION (minimal copy to keep functionality) -->
            <section id="sec-stars" class="fade-in d-none">[Stars content as original]</section>
            <!-- PREMIUM SECTION (minimal) -->
            <section id="sec-premium" class="fade-in d-none">[Premium content as original]</section>
            <!-- PROFILE SECTION -->
            <section id="sec-profile" class="fade-in d-none"><div id="profileContainer"></div></section>
        </main>
    </div>

    <!-- Bottom Nav -->
    <nav class="nav-dock">
        <a class="nav-btn active" onclick="nav('sec-home', this)"><i class="bi bi-house-door-fill"></i> Home</a>
        <a class="nav-btn" onclick="nav('sec-jobs', this)"><i class="bi bi-briefcase-fill"></i> Jobs</a>
        <a class="nav-btn" onclick="nav('sec-stars', this)"><i class="bi bi-star-fill"></i> Stars</a>
        <a class="nav-btn" onclick="nav('sec-premium', this)"><i class="bi bi-gem"></i> Premium</a>
        <a class="nav-btn" onclick="nav('sec-profile', this)"><i class="bi bi-person-badge-fill"></i> Profile</a>
    </nav>

    <!-- Zoom overlay -->
    <div class="zoom-overlay" id="zoomOverlay" onclick="closeZoom()">
        <span class="zoom-close" onclick="closeZoom(event)">&times;</span>
        <img src="" alt="Zoomed" class="zoomed-img" id="zoomedImg">
    </div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready(); tg.expand();
    const ADMIN_USERNAME = "hayre32";
    let currentUser = { id: 0, first_name: 'User', username: '' };
    let isAdmin = false;

    if (tg.initDataUnsafe?.user) {
        currentUser = tg.initDataUnsafe.user;
        const usernameRaw = (currentUser.username || '').toLowerCase().replace('@', '');
        isAdmin = (usernameRaw === ADMIN_USERNAME.toLowerCase());
    }

    function updateUserUI() {
        const displayName = currentUser.first_name || 'User';
        document.getElementById('user-status').innerText = isAdmin ? 'üëë Admin' : `@${currentUser.username || displayName}`;
        document.getElementById('user-avatar').src = `https://ui-avatars.com/api/?name=${displayName}&background=0088cc&color=fff&bold=true`;
        document.getElementById('welcomeName').innerText = isAdmin ? `Welcome Admin ${displayName}!` : `Welcome ${displayName}!`;
    }
    updateUserUI();

    // ---------- ZOOM FUNCTIONALITY ----------
    function openZoom(element) {
        const zoomOverlay = document.getElementById('zoomOverlay');
        const zoomedImg = document.getElementById('zoomedImg');
        // get high-res src from data-zoom-src, fallback to background-image
        let imgUrl = element.dataset.zoomSrc || element.style.backgroundImage.replace(/^url\(["']?|["']?\)$/g, '');
        zoomedImg.src = imgUrl;
        zoomOverlay.classList.add('active');
        tg.HapticFeedback.impactOccurred('medium');
    }

    function closeZoom(event) {
        if (event) event.stopPropagation();
        document.getElementById('zoomOverlay').classList.remove('active');
    }

    // attach slide dot update (simple per gallery)
    document.querySelectorAll('.card-img-gallery').forEach(gallery => {
        const slider = gallery.querySelector('.gallery-slider');
        const dots = gallery.querySelectorAll('.dot');
        if (!slider || !dots.length) return;

        slider.addEventListener('scroll', () => {
            const scrollLeft = slider.scrollLeft;
            const slideWidth = slider.clientWidth;
            const activeIndex = Math.round(scrollLeft / slideWidth);
            dots.forEach((dot, idx) => {
                dot.classList.toggle('active', idx === activeIndex);
            });
        });
    });

    // ---------- NAVIGATION ----------
    function nav(secId, btn) {
        document.querySelectorAll('section').forEach(s => s.classList.add('d-none'));
        document.getElementById(secId).classList.remove('d-none');
        if (secId === 'sec-profile') renderProfile();
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        tg.HapticFeedback.impactOccurred('light');
    }

    function navigateTo(secId) {
        const btn = Array.from(document.querySelectorAll('.nav-btn')).find(b => b.getAttribute('onclick')?.includes(secId));
        if (btn) nav(secId, btn);
    }

    // filter & search
    function filterType(type, element) {
        document.querySelectorAll('.card-job').forEach(card => {
            card.style.display = (type === 'all' || card.dataset.type === type) ? 'block' : 'none';
        });
        document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
        element.classList.add('active');
        tg.HapticFeedback.selectionChanged();
    }

    document.getElementById('jobSearch')?.addEventListener('input', (e) => {
        const term = e.target.value.toLowerCase();
        document.querySelectorAll('.card-job').forEach(card => {
            const title = card.querySelector('.job-title')?.innerText.toLowerCase() || '';
            card.style.display = title.includes(term) ? 'block' : 'none';
        });
    });

    function openLink(url) { tg.openLink(url); }

    // profile placeholder
    function renderProfile() {
        document.getElementById('profileContainer').innerHTML = `<div class="p-3">Profile content here...</div>`;
    }

    window.nav = nav; window.navigateTo = navigateTo; window.filterType = filterType; window.openLink = openLink;
    window.openZoom = openZoom; window.closeZoom = closeZoom;

    // also attach dots on first gallery manually
</script>
</body>
</html>
